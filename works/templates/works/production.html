{% extends "base.html" %}
{% load static %}

{% block hero_image %}{% if production.hero_image.url is not None %}{{ production.hero_image.url }}{% else %}{{ block.super }}{% endif %}{% endblock %}


{% block h1 %}
    {{ production.work.name }} {{ production.year }}
{% endblock %}

{% block content %}

{% if request.user.is_authenticated %}
    {% if user_like %}
        USER LIKES THIS <a href="?like=go">UNLIKE</a>
    {% else %}
        Like THIS? <a href="?like=go">LIKE</a>
    {% endif %}
{% endif %}

<section class="page-section" id="services">
    <div class="container">
    
        <h2  class="display-6 text-center">{{ production.tagline }}</h2>

        <p>{{ production.synopsis }}</p>
        
        <p>{{ production.hash_tag }}</p>

        <dl class="row">
            <dt class="col-sm-3">Premier</dt>
            <dd class="col-sm-9">{{ production.production_premiere }}</dd>
    
    
            <dt class="col-sm-3">dead</dt>
            <dd class="col-sm-9">{{ production.dead }}</dd>
        </dl>

    </div>
</section>


<!-- COMMENTS -->
<section class="page-section bg-light py-5" id="comments">
    <div class="container">
        <div class="text-center">
            <h2 class="text-uppercase">Comments</h2>
            <p class="text-muted">Meet the creative team behind {{ production.work.name }}</p>
        </div>

        <div class="row mt-5">
            {% for comment in comments %}
            <div class="col-sm-12 col-md-6 col-lg-3 text-center p-4">
                {{ comment.user.username }} wrote <span class="h5 link-dark">"{{ comment.comment }}"</span>
                {% if comment.user == request.user or request.user.is_superuser %}
                <a href="{% url 'comment_remove' comment.id %}" class="red">delete</a>
                {% endif %}
            </div>
            {% endfor %}

            {% if request.user.is_authenticated %}
            <form class="col-sm-12 col-md-6 col-lg-3 text-center p-4" action="{% url 'comment_add' production.id %}" method="POST" id="add-comment-form">
                {% csrf_token %}
                
                <textarea 
                 name="comment" 
                 maxlength="600" 
                 placeholder="Comment *" 
                 required 
                 id="id_comment" 
                 class="border-black rounded-0 profile-form-input textinput textInput form-control mb-2 w-100"></textarea>

                <button class="btn btn-primary text-uppercase w-100">add comment</button>
            </form>
            {% endif %}
        </div>
    </div>
</section>


<!-- CREATIVES -->
<section class="page-section bg-light py-5" id="creatives">
    <div class="container">
        <div class="text-center">
            <h2 class="text-uppercase">Creative team</h2>
            <p class="text-muted">Meet the creative team behind {{ production.work.name }}</p>
        </div>

        <div class="row mt-5">
            {% for role in creatives %}
            <div class="col-2 text-center mb-4">

                <a href="{% url 'person' role.person.url %}"><div class="img-cover img-circle mb-2" style="background-image: url('{{ role.person.thumb_image_url }}');"></div></a>

                <a href="{% url 'person' role.person.url %}" class="h5 link-dark text-decoration-none">{{ role.person.name }}</a>
                <p class="text-muted">{{ role.name }}</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>


<!-- CAST -->
<section class="page-section py-5" id="cast">
    <div class="container">
        <div class="text-center">
            <h2 class="text-uppercase">Cast</h2>
            <p class="text-muted">Meet the cast on {{ production.work.name }}</p>
        </div>
        
        <div class="row mt-5">
            {% for role in cast %}
            <div class="col-2 text-center mb-4">

                <a href="{% url 'person' role.person.url %}"><div class="img-cover img-circle mb-2" style="background-image: url('{{ role.person.thumb_image_url }}');"></div></a>

                <a href="{% url 'person' role.person.url %}" class="h5 link-dark text-decoration-none">{{ role.person.name }}</a>
                <p class="text-muted">{{ role.name }}</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>


<!-- STAFF -->
<section class="page-section bg-light py-5" id="staff">
    <div class="container">
        <div class="text-center">
            <h2 class="text-uppercase">Staff</h2>
            <p class="text-muted">Meet the team behind the scenes of {{ production.work.name }}</p>
        </div>

        <div class="row mt-5">
            {% for role in staff %}
            <div class="col-2 text-center mb-4">

                <a href="{% url 'person' role.person.url %}"><div class="img-cover img-circle mb-2" style="background-image: url('{{ role.person.thumb_image }}');"></div></a>

                <a href="{% url 'person' role.person.url %}" class="h5 link-dark text-decoration-none">{{ role.person.name }}</a>
                <p class="text-muted">{{ role.name }}</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>


    <!-- Media Grid-->
    <section class="page-section py-5" id="media">
        <div class="container">
            <div class="text-center">
                <h2 class="section-heading text-uppercase">Media</h2>
            </div>
            <div class="row mt-5">
                {% for media_item in media %}
                    <div class="col-md-6 col-lg-4 col-xl-3 mb-4 position-relative">
                        <div class="border border-dark">

                            <div class="img-cover img-thumb" style="background-image: url('{{ media_item.thumb_image_url }}'); height:280px;"></div>

                            <div class="px-2 pt-2">
                                <h6>
                                    <a href="{% url 'production_media' media_item.id %}" class="stretched-link text-decoration-none link-dark">{{ media_item.name }}</a>
                                </h6>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>


    <section class="page-section bg-light py-5">
        <div class="container">
            <div class="text-center">
                <h2 class="section-heading text-uppercase">Other productions</h2>
            </div>
            <div class="row row-cols-2 mt-5">
                {% for production in other_productions %}
                    <div class="col-md-6 col-lg-4 col-xl-3 mb-4">
                        <div class="border border-dark">
    
                            <a href="{% url 'production' production.url %}">
                                <div class="img-cover img-thumb" style="background-image: url('{{ production.thumb_image_url }}');"></div>
                            </a>
    
                            <div class="px-2 pt-2">
                                <h6>{{ production.year }}</h6>
    
                                <p class="fw-lighter lh-1">{{ production.tagline }}</p>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
    
        </div>
    </section>
    <!-- Other productions>
    <section class="page-section bg-light py-5" id="about">
        <div class="container">
            <div class="text-center">
                <h2 class="text-uppercase">Productions</h2>
                <p class="text-muted">Look for other productions of {{ production.work.name }}</p>

            </div>
            <ul class="timeline">

                {% for other_production in other_productions %}

                    {% if forloop.counter|divisibleby:2 %}
                        <li>
                    {% else %}
                        <li class="timeline-inverted">
                    {% endif %}

                    
                    <div class="timeline-image" style="background-image: url('{{ other_production.thumb_image_url }}');"></div>
                    <div class="timeline-panel mt-5">
                        <div class="timeline-heading">
                            <a href="{% url 'production' other_production.work.url %}" class="h4 text-decoration-none link-dark">{{ other_production.year}}</a>
                        </div>
                        <div class="timeline-body"><p class="text-muted">{{ production.tagline }}</p></div>
                    </div>
                </li>
                {% endfor %}

                <li>
                    <div class="timeline-image">
                        <h4>
                            Premiere:
                            <br />
                            {{ production.work.world_premiere|date:"d M" }}
                            <br />
                            {{ production.work.world_premiere|date:"Y" }}
                        </h4>
                    </div>
                </li>
            </ul>
        </div>
    </section-->



{% endblock %}

